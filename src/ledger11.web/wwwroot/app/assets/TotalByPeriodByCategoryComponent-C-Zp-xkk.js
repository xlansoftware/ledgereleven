import{j as s,B as f,f as j,r as m,Z as p,V as g}from"./index-DClkfX2h.js";import{I as C}from"./InsightComponent-DW_7WtON.js";import"./generateCategoricalChart-BjyP7sRa.js";import"./PieChart-BtmwHN6U.js";const c=({onClick:n,children:r})=>s.jsx(f,{onClick:o=>{o.preventDefault(),n()},variant:"outline",children:r});function w(n){const{categories:r,loadCategories:o}=j(),d=r.reduce((t,e)=>(t[e.name]=e,t),{}),[l,u]=m.useState(null);m.useEffect(()=>{r.length===0&&o().catch(e=>{console.error("Error loading categories:",e)});const t=Intl.DateTimeFormat().resolvedOptions().timeZone;p(`/api/insight/${encodeURIComponent(t)}`).then(e=>{e.ok?e.json().then(h=>{u(h)}):console.error("Error fetching insights:",e.statusText)})},[r.length,o]);const{expense:i,income:a}=l??{},x=!i||Object.keys(i).reduce((t,e)=>t+Object.keys(i[e]).length,0)===0;return s.jsxs("div",{className:"relative",children:[x&&s.jsx("div",{className:"flex items-center justify-center pt-16",children:"No expenses."}),Object.entries(i||{}).map(([t,e])=>e&&Object.keys(e).length>0?s.jsxs("div",{className:"mb-4 flex flex-col content-center items-center",children:[s.jsx(C,{data:e,altData:a==null?void 0:a[t],title:t,categories:d}),t==="today"&&s.jsx(c,{onClick:()=>n.setTab("per-day"),children:"view per day ..."}),t==="thisWeek"&&s.jsx(c,{onClick:()=>n.setTab("per-week"),children:"view per week ..."}),t==="thisMonth"&&s.jsx(c,{onClick:()=>n.setTab("per-month"),children:"view per month ..."})]},t):null),l===null&&s.jsx("div",{className:"flex items-center justify-center pt-16",children:s.jsx(g,{size:220,thickness:32})})]})}export{w as default};
