import{c as g,a3 as p,j as t,a6 as k,f as N,r as m,Z as b,B as C,V as T}from"./index-D1oPuFLq.js";import{R as I,P as M,T as v,a as A,C as L,L as O}from"./PieChart-DOT38AVn.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],D=g("circle-plus",R),E=({data:c,title:l,categories:o})=>{const s=Object.entries(c).map(([e,a])=>{var r,i;return{name:e,value:a,color:((r=o[e])==null?void 0:r.color)||"#8884d8",icon:p((i=o[e])==null?void 0:i.icon)}}),h=s.reduce((e,a)=>e+a.value,0),d=60,n={today:"Today",yesterday:"Yesterday",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",lastYear:"Last Year",total:"All Time"};return t.jsx("div",{children:s.length===0?t.jsx("p",{className:"text-muted-foreground text-center",children:"Â "}):t.jsx("div",{className:"relative h-64 w-full flex justify-center items-center",children:t.jsx(I,{width:"100%",height:"100%",children:t.jsxs(M,{children:[t.jsx(v,{formatter:(e,a)=>[`${e}`,a]}),t.jsxs(A,{isAnimationActive:!1,label:({cx:e,cy:a,midAngle:r,outerRadius:i,icon:f})=>{const x=Math.PI/180,u=e+(i+20)*Math.cos(-r*x),j=a+(i+20)*Math.sin(-r*x),y=f;return t.jsx(y,{x:u-10,y:j-10,width:"20",height:"20"})},labelLine:!1,data:s,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:d,paddingAngle:5,fill:"#8884d8",children:[s.map((e,a)=>t.jsx(L,{fill:e.color},`cell-${a}`)),t.jsx(O,{content:({viewBox:e})=>{if(e&&"cx"in e&&"cy"in e)return t.jsxs("text",{x:e.cx,y:e.cy,textAnchor:"middle",dominantBaseline:"middle",children:[t.jsx("tspan",{x:e.cx,y:e.cy,className:"fill-foreground text-3xl font-bold",children:k(h,0)}),t.jsx("tspan",{x:e.cx,y:(e.cy||0)+24,className:"fill-muted-foreground",children:n[l]})]})}})]})]})})})})};function Y(){const{categories:c,loadCategories:l}=N(),o=c.reduce((n,e)=>(n[e.name]=e,n),{}),[s,h]=m.useState(null);m.useEffect(()=>{c.length===0&&l().catch(e=>{console.error("Error loading categories:",e)});const n=Intl.DateTimeFormat().resolvedOptions().timeZone;b(`/api/insight/${encodeURIComponent(n)}`).then(e=>{e.ok?e.json().then(a=>{h(a)}):console.error("Error fetching insights:",e.statusText)})},[c.length,l]);const d=s&&Object.keys(s).reduce((n,e)=>n+Object.keys(s[e]).length,0)===0;return t.jsxs("div",{className:"relative",children:[t.jsx(C,{className:"fixed top-16 right-4 z-50 w-12 h-12 flex items-center justify-center",variant:"ghost",children:t.jsx(D,{className:"w-16 h-16"})}),d&&t.jsx("div",{className:"flex items-center justify-center pt-16",children:"No records."}),s&&Object.keys(s).length>0?Object.entries(s).map(([n,e])=>e&&t.jsx("div",{className:"mb-4",children:t.jsx(E,{data:e,title:n,categories:o})},n)):t.jsx("div",{className:"flex items-center justify-center pt-16",children:t.jsx(T,{size:220,thickness:32})})]})}export{Y as default};
