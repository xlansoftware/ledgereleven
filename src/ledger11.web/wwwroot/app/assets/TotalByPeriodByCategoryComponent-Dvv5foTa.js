import{j as s,B as j,u as p,r as m,a2 as f,$ as k}from"./index-CK-aAuUG.js";import{I as v}from"./InsightComponent-Dki74NLN.js";import"./generateCategoricalChart-CiZXDMUu.js";import"./PieChart-_hbwlVyA.js";const c=({onClick:n,children:i})=>s.jsx(j,{onClick:r=>{r.preventDefault(),n()},variant:"outline",children:i});function w(n){const{transactions:i,categories:r}=p(),u=r.reduce((e,t)=>(e[t.name]=t,e),{}),[l,d]=m.useState(null);m.useEffect(()=>{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;f(`/api/insight/${encodeURIComponent(e)}`).then(t=>{t.ok?t.json().then(h=>{d(h)}):console.error("Error fetching insights:",t.statusText)})},[i]);const{expense:o,income:a}=l??{},x=!o||Object.keys(o).reduce((e,t)=>e+Object.keys(o[t]).length,0)===0;return s.jsxs("div",{className:"relative",children:[x&&s.jsx("div",{className:"flex items-center justify-center pt-16",children:"No expenses."}),Object.entries(o||{}).map(([e,t])=>t&&Object.keys(t).length>0?s.jsxs("div",{className:"mb-4 flex flex-col content-center items-center",children:[s.jsx(v,{data:t,altData:a==null?void 0:a[e],title:e,categories:u}),e==="today"&&s.jsx(c,{onClick:()=>n.setTab("per-day"),children:"view per day ..."}),e==="thisWeek"&&s.jsx(c,{onClick:()=>n.setTab("per-week"),children:"view per week ..."}),e==="thisMonth"&&s.jsx(c,{onClick:()=>n.setTab("per-month"),children:"view per month ..."})]},e):null),l===null&&s.jsx("div",{className:"flex items-center justify-center pt-16",children:s.jsx(k,{size:220,thickness:32})})]})}export{w as default};
