import{a2 as p,j as e,a5 as f}from"./index-C932lcfq.js";import{R as D,T as E,m as A,x as S}from"./generateCategoricalChart-D1DSdnH5.js";import{P as $,a as b}from"./PieChart-CI1hyJCM.js";const F=({data:i,altData:d,title:a,categories:r,children:h})=>{const c=Object.entries(i).map(([t,n])=>{var l,s;return{name:t,value:n,color:((l=r[t])==null?void 0:l.color)||"#8884d8",icon:p((s=r[t])==null?void 0:s.icon)}}),o=d&&Object.entries(d).map(([t,n])=>{var l,s;return{name:t,value:n,color:((l=r[t])==null?void 0:l.color)||"#8884d8",icon:p((s=r[t])==null?void 0:s.icon)}}),m=c.reduce((t,n)=>t+n.value,0),x=o?o.reduce((t,n)=>t+n.value,0):0,{startAngle:T,endAngle:N,altStartAngle:I,altEndAngle:M}=O(m,x),R=x==0?60:70,u=60,C=20,y={today:"Today",yesterday:"Yesterday",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",lastYear:"Last Year",total:"All Time"},L=({viewBox:t})=>e.jsxs("text",{x:t.cx,y:t.cy,textAnchor:"middle",dominantBaseline:"middle",children:[e.jsx("tspan",{x:t.cx,y:(t.cy||0)-12,className:"fill-foreground text-3xl font-bold",children:f(m,0)}),e.jsxs("tspan",{x:t.cx,y:(t.cy||0)+12,className:"fill-muted-foreground text-l font-bold",children:["(",f(x,0),")"]}),e.jsx("tspan",{x:t.cx,y:(t.cy||0)+36,className:"fill-muted-foreground",children:y[a]??a})]}),Y=({viewBox:t})=>e.jsxs("text",{x:t.cx,y:t.cy,textAnchor:"middle",dominantBaseline:"middle",children:[e.jsx("tspan",{x:t.cx,y:t.cy,className:"fill-foreground text-3xl font-bold",children:f(m,0)}),e.jsx("tspan",{x:t.cx,y:(t.cy||0)+24,className:"fill-muted-foreground",children:y[a]??a})]}),j=({cx:t,cy:n,midAngle:l,outerRadius:s,icon:k})=>{const g=Math.PI/180,K=t+(s+20)*Math.cos(-l*g),P=n+(s+20)*Math.sin(-l*g),W=k;return e.jsx(W,{x:K-10,y:P-10,width:"20",height:"20"})};return e.jsx("div",{className:"w-full",children:c.length===0?e.jsx("p",{className:"text-muted-foreground text-center",children:"Â "}):e.jsxs("div",{className:"relative h-64 w-full flex flex-row ",children:[e.jsx(D,{width:"100%",height:"100%",children:e.jsxs($,{margin:{top:0,right:0,left:0,bottom:0},children:[e.jsx(E,{formatter:(t,n)=>[`${t}`,n]}),o&&e.jsx(b,{isAnimationActive:!1,label:j,data:o,dataKey:"value",nameKey:"name",startAngle:I,endAngle:M,outerRadius:u+C,innerRadius:u,paddingAngle:5,children:o.map((t,n)=>e.jsx(A,{fill:t.color},`cell-${n}`))}),e.jsxs(b,{isAnimationActive:!1,label:j,labelLine:!1,data:c,dataKey:"value",nameKey:"name",startAngle:T,endAngle:N,cx:"50%",cy:"50%",innerRadius:R,paddingAngle:5,fill:"#8884d8",children:[c.map((t,n)=>e.jsx(A,{fill:t.color},`cell-${n}`)),e.jsx(S,{content:({viewBox:t})=>{if(t&&"cx"in t&&"cy"in t)return x===0?e.jsx(Y,{viewBox:t}):e.jsx(L,{viewBox:t})}})]})]})}),h]})})};function O(i,d){const a=i+d,r=0,h=i/a*360,c=h+5,o=c+d/a*360-10;return{startAngle:r,endAngle:h,altStartAngle:c,altEndAngle:o}}export{F as I};
