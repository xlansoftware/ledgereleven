import{f as v,r as s,Z as E,j as a,B as L}from"./index-CU1kbiOn.js";import{I as S}from"./InsightComponent-JjGWgZlw.js";import"./generateCategoricalChart-moDAlSuT.js";import"./PieChart-at-e7Q9m.js";const l=5;function w({period:o}){const{categories:h,loadCategories:d}=v(),[u,r]=s.useState([]),[x,f]=s.useState(0),[i,m]=s.useState(!1),[g,p]=s.useState(!0),j=h.reduce((e,t)=>(e[t.name]=t,e),{}),c=s.useCallback(async e=>{m(!0);try{const t=await E(`/api/insight/per-period/${o}?start=${e}&count=${l}`);if(t.ok){const n=await t.json();r(e===0?n:C=>[...C,...n]),f(e+l),n.length<l&&p(!1)}}finally{m(!1)}},[o]);s.useEffect(()=>{d()},[d]),s.useEffect(()=>{r([]),f(0),p(!0),c(0)},[o,c]);const y=()=>{c(x)};return i&&u.length===0?a.jsx("div",{className:"flex items-center justify-center pt-16",children:"Loading..."}):a.jsxs("div",{className:"relative space-y-4",children:[u.map(({title:e,expense:t,income:n})=>a.jsx("div",{className:"mb-4",children:a.jsx(S,{data:t,altData:n,title:e,categories:j})},e)),g&&a.jsx("div",{className:"flex justify-center",children:a.jsx(L,{onClick:y,disabled:i,variant:"secondary",children:i?"Loading...":"Load more..."})})]})}export{w as default};
