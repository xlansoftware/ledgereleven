import{u as C,r as s,Y as L,j as a,B as S}from"./index-BsiFfdWj.js";import{I as k}from"./InsightComponent-DZHBB-R6.js";import"./generateCategoricalChart-ConnN4wq.js";import"./PieChart-BK8rte5D.js";const l=5;function b({period:o}){const{transactions:p,categories:h}=C(),[d,r]=s.useState([]),[x,u]=s.useState(0),[i,f]=s.useState(!1),[j,m]=s.useState(!0),g=h.reduce((t,e)=>(t[e.name]=e,t),{}),c=s.useCallback(async t=>{f(!0);try{const e=await L(`/api/insight/per-period/${o}?start=${t}&count=${l}`);if(e.ok){const n=await e.json();r(t===0?n:y=>[...y,...n]),u(t+l),n.length<l&&m(!1)}}finally{f(!1)}},[o]);s.useEffect(()=>{r([]),u(0),m(!0),c(0)},[o,c,p]);const v=()=>{c(x)};return i&&d.length===0?a.jsx("div",{className:"flex items-center justify-center pt-16",children:"Loading..."}):a.jsxs("div",{className:"relative space-y-4",children:[d.map(({title:t,expense:e,income:n})=>a.jsx("div",{className:"mb-4",children:a.jsx(k,{data:e,altData:n,title:t,categories:g})},t)),j&&a.jsx("div",{className:"flex justify-center",children:a.jsx(S,{onClick:v,disabled:i,variant:"secondary",children:i?"Loading...":"Load more..."})})]})}export{b as default};
